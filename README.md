# TextPath Editor

一个专业的图片编辑器，支持路径文字特效。

## 技术栈

- 纯原生 JavaScript (ES6+)
- HTML5 Canvas API
- CSS3

## 主要功能

- 基础图片编辑
  - 裁切
  - 旋转/翻转
  - 滤镜效果
- 路径文字
  - 自由绘制文字路径
  - 文字大小/颜色/间距调整
  - 支持 Emoji
- 操作历史
  - 撤销/重做
  - 状态保存

## 架构设计

### 核心类

- `ImageEditor`: 主编辑器类，管理所有编辑功能
  - 维护两个 Canvas 层
    - mainCanvas: 主画布，显示当前编辑状态
    - tempCanvas: 临时画布，用于路径文字绘制和实时预览

### 重要逻辑

#### 图片处理
- 图片加载时自动适应画布大小，保持原始比例
- 使用 `drawImage()` 确保图片居中显示
- 所有坐标计算都考虑了画布缩放比例

#### 裁切功能
- 使用 DOM 元素创建裁切框和遮罩
- 精确的像素对齐处理：
  - 使用 `Math.floor` 确保整数像素值
  - 考虑设备像素比进行坐标转换
  - 遮罩区域严格对齐图片边界

#### 路径文字
- 路径简化算法减少冗余点
- 支持文字间距动态调整
- 使用 `Array.from()` 正确处理 Emoji
- 实时预览与状态保存分离

#### 状态管理
- 使用历史记录栈存储操作
- 支持有限步数的撤销/重做
- 针对不同操作类型的状态保存策略

## 技术要点

1. Canvas 操作
   - 双画布机制
   - 坐标系转换
   - 像素级操作

2. DOM 操作
   - 动态创建 UI 元素
   - 事件委托
   - 样式计算

3. 状态管理
   - 操作历史记录
   - 状态恢复
   - 内存管理

## 浏览器支持

- Chrome 最新版
- Firefox 最新版
- Safari 最新版
- Edge 最新版

## 开发环境

- Node.js >= 14.0.0
- npm >= 6.0.0

## 项目结构
